# ── Local development ────────────────────────────────────────────────────────
# Copy this file to .env (gitignored) and adjust as needed.
# When running `npm run dev`, Vite proxies /rest/v1/* to PostgREST on :3000.

VITE_SUPABASE_URL=http://localhost:5173

# JWT signed with PGRST_JWT_SECRET from docker-compose.yml (role: anon).
# Use this value as-is — it is pre-computed from the secret in docker-compose.yml.
# If you ever change PGRST_JWT_SECRET there, you must regenerate this token to match.
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTc5OTUzNTYwMH0.F_rDxRTPE8OU83L_CNgEGXfmirMXmMMugT29Cvc8ygQ

# ── AI Problem Generator ─────────────────────────────────────────────────────
# Server-side only — never use a VITE_ prefix here.
# Set EXACTLY ONE of the two keys below. Setting both will cause an error.
# For local dev run: vercel dev (instead of npm run dev) so the /api route works.
#
# Option A — Anthropic direct (tool use, most reliable structured output):
# ANTHROPIC_API_KEY=sk-ant-...
#
# Option B — OpenRouter (easy model switching):
# OPENROUTER_API_KEY=sk-or-...

# ── Free tier limits ──────────────────────────────────────────────────────────
# Max generated exercises a non-subscriber can save (default: 1).
# Set to 0 to block free users entirely, or a high number to allow unlimited.
# VITE_FREE_EXERCISE_LIMIT=1

# ── Backend subscription enforcement ─────────────────────────────────────────
# SUPABASE_URL — server-side direct URL to GoTrue/PostgREST, bypassing the Vite proxy.
# Local docker-compose: GoTrue is at :9999, PostgREST at :3000, but supabase-js needs
# one base URL. Set this to http://localhost:5173 so the Vite proxy unifies them,
# OR run both `npm run dev` AND `vercel dev` together (Vite must be up for the proxy).
# Production: omit this — the fallback to VITE_SUPABASE_URL is correct.
# SUPABASE_URL=http://localhost:5173

# Service role key — used server-side only to verify JWTs and check subscription.
# Local docker-compose (pre-computed from GOTRUE_JWT_SECRET in docker-compose.yml):
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaXNzIjoic3VwYWJhc2UtZGVtbyIsImlhdCI6MTY0MTc2OTIwMCwiZXhwIjoxNzk5NTM1NjAwfQ.5z-pJI1qwZg1LE5yavGLqum65WOnnaaI5eZ3V00pLww
# Production — Dashboard → Settings → API → "Secret key". Override with your real key:
# SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...

# Server-authoritative free limit (set to match or override VITE_FREE_EXERCISE_LIMIT).
# FREE_EXERCISE_LIMIT=1

# ── Production (Supabase) ─────────────────────────────────────────────────────
# Replace the values below and redeploy.

# VITE_SUPABASE_URL=https://your-project.supabase.co
# VITE_SUPABASE_ANON_KEY=your_publishable_key   ← Dashboard → Settings → API → "Publishable key"
# SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...         ← Dashboard → Settings → API → "Secret key"
